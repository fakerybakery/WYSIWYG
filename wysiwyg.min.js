function WYSIWYG(e){var t=document.createElement("menu-tray"),n=document.createElement("div");n.textContent=e.value,n.style=e.style,n.contentEditable=!0;var i=document.createElement("button");i.innerHTML="<b>B</b>",i.setAttribute("type","button");var o=document.createElement("button");o.innerHTML="<u>U</u>",o.setAttribute("type","button");var a=document.createElement("button");a.innerHTML="<i>I</i>",a.setAttribute("type","button");var l=document.createElement("button");l.textContent="\uD83D\uDD17",l.setAttribute("type","button");var d=document.createElement("button");d.innerHTML="H1",d.setAttribute("type","button");var r=document.createElement("button");r.innerHTML="H2",r.setAttribute("type","button");var s=document.createElement("button");s.innerHTML='"',s.setAttribute("type","button");var c=document.createElement("button");c.innerHTML="N",c.setAttribute("type","button");var u=document.createElement("button");function p(){t.style.display="none"}function m(){e.value=n.innerHTML;var c=window.getSelection();if(c.toString().length>0){t.style.display="block";let u=c.getRangeAt(0),p=u.getBoundingClientRect(),m=(p.top+p.bottom)/2;m<window.innerHeight/2?(t.style.top=`${p.bottom+window.pageYOffset}px`,t.style.borderTopLeftRadius="0px",t.style.borderBottomLeftRadius="100px"):(t.style.top=`${p.top+window.pageYOffset-t.offsetHeight}px`,t.style.borderTopLeftRadius="100px",t.style.borderBottomLeftRadius="0px"),t.style.left=`${p.left+window.pageXOffset}px`}else t.style.display="none";if(c.rangeCount&&c.getRangeAt){for(var b=c.getRangeAt(0).commonAncestorContainer,v=!1,L=!1,f=!1,y=!1,g=!1,E=!1,_=!1;b;)1==b.nodeType&&"B"==b.nodeName&&(v=!0),1==b.nodeType&&"U"==b.nodeName&&(L=!0),1==b.nodeType&&"A"==b.nodeName&&(f=!0),1==b.nodeType&&"H1"==b.nodeName&&(y=!0),1==b.nodeType&&"H2"==b.nodeName&&(g=!0),1==b.nodeType&&"BLOCKQUOTE"==b.nodeName&&(E=!0),1==b.nodeType&&"I"==b.nodeName&&(_=!0),b=b.parentNode;i.classList.toggle("active",v),o.classList.toggle("active",L),l.classList.toggle("active",f),d.classList.toggle("active",y),r.classList.toggle("active",g),s.classList.toggle("active",E),a.classList.toggle("active",_)}}u.textContent="â€“",u.setAttribute("type","button"),t.appendChild(i),t.appendChild(o),t.appendChild(a),t.appendChild(l),t.appendChild(d),t.appendChild(r),t.appendChild(s),t.appendChild(c),t.appendChild(u),n.addEventListener("input",m),n.addEventListener("keyup",m),n.addEventListener("focus",m),n.addEventListener("mouseup",m),i.addEventListener("click",function e(){document.execCommand("bold",!1,null)}),o.addEventListener("click",function e(){document.execCommand("underline",!1,null)}),l.addEventListener("click",function e(){var t=prompt("Enter URL:");document.execCommand("createLink",!1,t)}),d.addEventListener("click",function e(){document.execCommand("formatBlock",!1,"H1")}),r.addEventListener("click",function e(){document.execCommand("formatBlock",!1,"H2")}),s.addEventListener("click",function e(){document.execCommand("formatBlock",!1,"BLOCKQUOTE")}),a.addEventListener("click",function e(){document.execCommand("italic",!1,null)}),c.addEventListener("click",function e(){document.execCommand("formatBlock",!1,"div"),this.getEditor=function(){return n}}),u.addEventListener("click",function e(){document.execCommand("insertHorizontalRule",!1,null)});var b=e.parentElement;b.insertBefore(n,e.nextSibling),t.classList.add("wysiwygmt"),n.classList.add("wysiwyge"),b.insertBefore(t,e.nextSibling)}
